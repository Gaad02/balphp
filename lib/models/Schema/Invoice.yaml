
# ==============================================
# BAL INVOICE

Bal_InvoiceItem:
    actAs:
        SoftDelete:
    columns:
        id:
            type: integer(2)
            primary: true
            unsigned: true
            autoincrement: true
        title:
            type: string(50)
            notblank: true
        cost:
            type: decimal(8)
            scale: 2
            notblank: true
            extra:
                currency: true
        template:
            type: string(50)
            notblank: true
            default: "user_invoiceitem"
            extra:
                auto: true
                
        invoice_id:
            type: integer(2)
            unsigned: true
            notblank: true
    relations:
        Invoice:
            class: Invoice
            local: invoice_id
            foreign: id
            foreignAlias: InvoiceItems
            foreignType: many
            onDelete: "CASCADE"

Bal_Invoice:
    actAs:
        SoftDelete:
        Timestampable:
    columns:
        id:
            type: integer(2)
            primary: true
            unsigned: true
            autoincrement: true
        title:
            type: string(50)
            notblank: true
        template:
            type: string(50)
            notblank: true
            default: "user_invoice"
            extra:
                auto: true
        cost:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        subtotal:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        tax:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        config:
            type: array
            notnull: true
        cache:
            # Cache of any information that may change externally
            type: array
            notnull: true

        UserFor_id:
            type: integer(2)
            unsigned: true
        UserFrom_id:
            type: integer(2)
            unsigned: true
    relations:
        UserFor:
            class: User
            local: UserFor_id
            foreign: id
            foreignAlias: InvoicesFor
        UserFrom:
            class: User
            local: UserFrom_id
            foreign: id
            foreignAlias: InvoicesFrom