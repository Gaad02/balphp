
# ==============================================
# BAL INVOICE

Bal_InvoiceItem:
    actAs:
        SoftDelete:
    columns:
        id:
            type: integer(2)
            primary: true
            unsigned: true
            autoincrement: true
        title:
            type: string(50)
            notblank: true
        template:
            type: string(50)
            notblank: true
            default: "user_invoiceitem"
            extra:
                auto: true
        
        price_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        price_each:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        subtotal:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        quantity:
            type: int(2)
            notnull: true
            extra:
                currency: true
        payment_fee:
            type: decimal(8)
            scale: 2
            notnull: true
            default: 0.00
            extra:
                currency: true
               
        handling_each:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        handling_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
             
        tax_each:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        tax_rate:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                percentage: true
        tax_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
                    
        weight_each:
            type: decimal(8)
            scale: 2
            notnull: true
        weight_unit:
            type: enum
            values: [kgs,lbs]
            default: kgs
            notblank: true
                
        discount_each:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        discount_rate:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                percentage: true
        discount_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
                
        shipping_first:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        shipping_additional:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        shipping_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
           
        Invoice_id:
            type: integer(2)
            unsigned: true
            notblank: true
    relations:
        Invoice:
            class: Invoice
            local: Invoice_id
            foreign: id
            foreignAlias: InvoiceItems
            foreignType: many
            onDelete: "CASCADE"

Bal_Invoice:
    actAs:
        SoftDelete:
        Timestampable:
    columns:
        id:
            type: integer(2)
            primary: true
            unsigned: true
            autoincrement: true
        title:
            type: string(50)
            notblank: true
        template:
            type: string(50)
            notblank: true
            default: "user_invoice"
            extra:
                auto: true
        
        status:
            type: enum
            values: [pending,published,completed]
            notblank: true
            default: published
        payment_status:
            type: enum
            values: [awaiting,created,pending,refunded,processed,completed,canceled_reversal,denied,expired,failed,voided,reversed]
            notblank: true
            default: awaiting
        payment_error:
            type: string(255)
        payment_fee:
            type: decimal(8)
            scale: 2
            notnull: true
            default: 0.00
            extra:
                currency: true
        paid_at:
            type: timestamp
        currency_code:
            type: string(2)
            country: true
        weight_unit:
            type: enum
            values: [kgs,lbs]
            default: kgs
            notblank: true
            
        items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        price_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        subtotal:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        
        handling_invoice:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        handling_invoice_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        handling_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        handling_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
                
        tax_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        tax_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
                
        weight_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
        weight_total:
            type: decimal(8)
            scale: 2
            notnull: true
        
        discount_invoice:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        discount_invoice_rate:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        discount_invoice_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        discount_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        discount_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        
        shipping_invoice:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        shipping_invoice_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        shipping_items_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
        shipping_total:
            type: decimal(8)
            scale: 2
            notnull: true
            extra:
                currency: true
                
        config:
            # Cache of any invoice configuration that may change externally
            type: array
            notnull: true
        cache:
            # Cache of any invoice information that may change externally
            type: array
            notnull: true
            
        File_id:
            type: integer(2)
            unsigned: true
        UserFor_id:
            type: integer(2)
            unsigned: true
        UserFrom_id:
            type: integer(2)
            unsigned: true
    relations:
        File:
            class: File
            local: File_id
            foreign: id
            foreignAlias: Invoices
            foreignType: many
            onDelete: "CASCADE"
        UserFor:
            class: User
            local: UserFor_id
            foreign: id
            foreignAlias: InvoicesFor
        UserFrom:
            class: User
            local: UserFrom_id
            foreign: id
            foreignAlias: InvoicesFrom

